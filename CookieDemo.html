<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <button type="button" id="buttonWrite">寫入Cookie</button>
    <button type="button" id="buttonRead">讀取Cookie</button>

    <script src="scripts/Utiltiy.js"></script>
    <script>
        const btnWrite = document.querySelector('#buttonWrite');
        const btnRead = document.querySelector('#buttonRead');

        //將資料寫入Cookie key=value
        btnWrite.addEventListener('click', event => {
            document.cookie = 'username=Tom; HttpOnly'; //無法透過JavaScript讀取
            document.cookie = 'theme=dark; max-age=60'; //保留一分鐘
        })

        //讀取Cookie資料
        btnRead.addEventListener('click', event => {
            console.log('cookie：', document.cookie); //username=Tom; theme=dark
            const cookie = document.cookie;
            // const datas = cookie.split('; '); //['username=Tom', 'theme=dark']
            // const datas1 = datas[0].split('='); //['username','Tom']
            // const datas2 = datas[1].split('='); //['theme','dark']
            // console.log(datas1[1]); //Tom
            // console.log(datas2[1]); //dark
            const cookieObj = parseCookies(cookie);
            console.log(cookieObj.username);
            console.log(cookieObj.theme);
        })

        // const parseCookies = _cookie => {
        //     //_cookie.split("; ") => ['username=Tom', 'theme=dark']
        //     return _cookie.split("; ").reduce((acc, cookie) => {
        //         const [key, value] = cookie.split("="); //['username','Tom']、['theme','dark']
        //         acc[key] = decodeURIComponent(value);  //{'username':'tom', 'theme':'dark'}
        //         return acc;
        //     }, {});
        // }
        //encodeURIComponent 用來將英文字母及數字以外的字元進行編碼避免亂碼的問題
        //decodeURIComponent 用來將encodeURIComponent編碼的字元進行解碼

        // const obj = {};
        // obj['name'] = 'Eric';
        // obj.age = 30;
        // console.log(obj);

        // let balls = ["basketball", "valleyball", "baseball", "valleyball", "baseball", "baseball"];
        // let ballCount = balls.reduce((accumulator, ball) => {
        //     accumulator[ball] = (accumulator[ball] || 0) + 1;
        //     return accumulator;
        // }, {})

        // console.log(ballCount);

    </script>
</body>

</html>